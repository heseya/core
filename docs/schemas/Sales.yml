SaleBase:
  type: object
  properties:
    id:
      type: string
      format: uuid
    slug:
      type: string
      example: "promo-123"
    percentage:
      type: string
      example: "50.0"
    priority:
      type: number
    target_type:
      type: string
      enum: ["order-value", "products", "shipping-price", "cheapest-product"]
    target_is_allow_list:
      type: boolean
    active:
      type: boolean
    metadata:
      $ref: "./../schemas/Metadata.yml#/Metadata"
    metadata_private:
      $ref: "./../schemas/Metadata.yml#/Metadata"
    translations:
      type: array
      description: "Translation table for languages. Array key is language UUID"
      items:
        type: object
        properties:
          name:
            type: string
            example: "Black"
          description:
            type: string
            example: "Black Weekend 2021"
          description_html:
            type: string
    published:
      type: array
      description: "Array of published languages"
      items:
        type: string
        format: uuid

Sale:
  type: object
  allOf:
    - $ref: "#/SaleBase"
    - properties:
        name:
          type: string
          example: "Black"
        description:
          type: string
          example: "Black Weekend 2021"
        description_html:
          type: string
        amounts:
          type: array
          items:
            $ref: "./../schemas/Prices.yml#/AmountResource"

SaleIndex:
  type: object
  allOf:
    - $ref: "#/Sale"
    - properties:
        amounts:
          type: array
          items:
            $ref: "./../schemas/Prices.yml#/AmountResource"

SaleShow:
  type: object
  allOf:
    - $ref: "#/Sale"
    - properties:
        amounts:
          type: array
          items:
            $ref: "./../schemas/Prices.yml#/AmountResource"
        uses:
          type: number
        seo:
          $ref: "./Seo.yml#/SeoView"
        condition_groups:
          type: array
          items:
            $ref: "./DiscountConditions.yml#/ConditionGroupShow"
        target_products:
          type: array
          items:
            $ref: "./Products.yml#/Product"
        target_sets:
          type: array
          items:
            $ref: "./ProductSets.yml#/ProductSet"
        target_shipping_methods:
          type: array
          items:
            $ref: "./ShippingMethods.yml#/ShippingMethod"

SaleUpdate:
  type: object
  allOf:
    - $ref: "#/SaleBase"
    - properties:
        amounts:
          type: array
          items:
            type: object
            properties:
              value:
                type: string
                example: "19.99"
              currency:
                type: string
                example: "PLN"
        seo:
          $ref: "./Seo.yml#/SeoStore"
        condition_groups:
          type: array
          items:
            $ref: "./DiscountConditions.yml#/ConditionGroup"
        target_products:
          type: array
          items:
            type: string
            format: uuid
        target_sets:
          type: array
          items:
            type: string
            format: uuid
        target_shipping_methods:
          type: array
          items:
            type: string
            format: uuid

SaleStore:
  type: object
  allOf:
    - $ref: "#/SaleUpdate"
    - properties:
        seo:
          $ref: "./Seo.yml#/SeoStore"
        metadata:
          $ref: "./../schemas/Metadata.yml#/Metadata"
        metadata_private:
          $ref: "./../schemas/Metadata.yml#/Metadata"
