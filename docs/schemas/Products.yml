BaseProduct:
  type: object
  properties:
    id:
      type: string
      format: uuid
    slug:
      description: "Name used in the URL path"
      type: string
      example: white-socks
    name:
      description: "Displayed product name"
      type: string
      example: "White socks"
    price_initial:
      $ref: "./../schemas/Prices.yml#/PriceResourceWithSalesChannel"
    price:
      $ref: "./../schemas/Prices.yml#/PriceResourceWithSalesChannel"
    public:
      description: "Whether product is not set to be hidden."
      type: boolean
    visible:
      description: "Whether product is visible due to public setting and set visibility"
      type: boolean
    available:
      description: "Whether all parts for minimum product config are available"
      type: boolean
    quantity_step:
      description: "In what increments can you increase the product quantity"
      type: number
      example: 0.05
    quantity:
      description: "Product quantity summary"
      type: number
      example: 20
    google_product_category:
      description: "Google product category identification number"
      type: number
      example: 2271
    shipping_time:
      type: integer
      example: 5
    shipping_date:
      type: string
      format: date-time
      example: "2021-09-13T11:11"
    shipping_digital:
      description: "Whether product is digital and not delivered by physical means"
      type: boolean
    purchase_limit_per_user:
      type: number
      example: 5
    cover:
      $ref: "./Media.yml#/Media"
    tags:
      description: "Ids of assigned subsets"
      type: array
      items:
        $ref: "./Tags.yml#/Tag"
    metadata:
      $ref: "./../schemas/Metadata.yml#/Metadata"
    metadata_private:
      $ref: "./../schemas/Metadata.yml#/Metadata"
    has_schemas:
      description: "Does product has any attached schema"
      type: boolean
    translations:
      type: array
      description: "Translation table for languages. Array key is language UUID"
      items:
        type: object
        properties:
          name:
            description: "Product name"
            type: string
            example: "Shirt"
          description_html:
            description: "HTML formatted text"
            type: string
            example: "<h1>Lorem ipsum dolor sit amet</h1>"
          description_short:
            type: string

ProductDetailedProperties:
  type: object
  properties:
    description_html:
      description: "HTML formatted text to be displayed as a product description"
      type: string
      example: "<h1>Lorem ipsum dolor sit amet</h1>"
    description_short:
      description: "Plain text short product description"
      type: string
    descriptions:
      type: array
      items:
        $ref: "./Pages.yml#/Page"
    items:
      $ref: "./Items.yml#/ItemWithRequiredQuantity"
    gallery:
      description: "Ids of assigned subsets"
      type: array
      items:
        $ref: "./Media.yml#/Media"
    schemas:
      description: "Ids of assigned subsets"
      type: array
      items:
        $ref: "./Schemas.yml#/Schema"
    sets:
      description: "Assigned product sets"
      type: array
      items:
        $ref: "./ProductSets.yml#/ProductSet"
    related_sets:
      description: "Sets with products related to this one"
      type: array
      items:
        $ref: "./ProductSets.yml#/ProductSet"
    attributes:
      description: "Array of assigned attributes"
      type: array
      items:
        $ref: "./Attributes.yml#/AttributeProduct"
    seo:
      $ref: "./Seo.yml#/SeoView"
    attachments:
      description: "List of all media attachments"
      type: array
      items:
        $ref: "./MediaAttachments.yml#/MediaAttachment"
    banner:
      $ref: "#/ProductBanner"

Product:
  type: object
  allOf:
    - $ref: "#/BaseProduct"
    - properties:
        published:
          type: array
          items:
            type: string
            format: uuid

ProductView:
  type: object
  allOf:
    - $ref: "#/Product"
    - $ref: "#/ProductDetailedProperties"
    - properties:
        sales:
          description: "List of all applied sales"
          type: array
          items:
            $ref: "./Sales.yml#/Sale"

ProductWithoutSalesView:
  type: object
  allOf:
    - $ref: "#/BaseProduct"
    - $ref: "#/ProductDetailedProperties"

ProductIndex:
  type: object
  allOf:
    - $ref: "#/Product"
    - properties:
        attributes:
          description: "Array of assigned attributes"
          type: array
          items:
            $ref: "./Attributes.yml#/AttributeProductList"
        relevancy:
          type: object
          properties:
            title_position:
              type: number
            title_relevancy:
              type: number
            title_natural_relevancy:
              type: number
            title_words_relevancy:
              type: number
            content_natural_relevancy:
              type: number
            content_relevancy:
              type: number
            slug_length:
              type: number

ProductShort:
  type: object
  properties:
    id:
      type: string
      format: uuid
    slug:
      description: "Name used in the URL path"
      type: string
      example: white-socks
    name:
      description: "Displayed product name"
      type: string
      example: "White socks"
    price_initial:
      $ref: "./Prices.yml#/PriceResourceWithSalesChannel"
    price:
      $ref: "./Prices.yml#/PriceResourceWithSalesChannel"
    public:
      description: "Whether product is not set to be hidden."
      type: boolean
    visible:
      description: "Whether product is visible due to public setting and set visibility"
      type: boolean
    available:
      description: "Whether all parts for minimum product config are available"
      type: boolean
    quantity:
      description: "Product quantity summary"
      type: number
      example: 20
    cover:
      $ref: "./Media.yml#/Media"

ProductBanner:
  type: object
  properties:
    title:
      type: string
      example: "Spring banner"
    subtitle:
      type: string
      example: "Spring spring spring"
    url:
      type: string
      example: "https://via.placeholder.com/640x480.png/00ffff?text=excepturi"
    media:
      type: array
      items:
        type: array
        items:
          type: object
          properties:
            min_screen_width:
              type: integer
              example: 200
            media:
              $ref: "./Media.yml#/Media"
    translations:
      type: array
      description: "Translation table for languages. Array key is language UUID"
      items:
        type: object
        properties:
          title:
            type: string
            example: "Spring banner"
          subtitle:
            type: string
            example: "Spring spring spring"
